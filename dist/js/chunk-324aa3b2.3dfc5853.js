(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-324aa3b2"],{"0a54":function(e,t,r){"use strict";r("47c9")},"159b":function(e,t,r){var n=r("da84"),o=r("fdbc"),a=r("17c2"),i=r("9112");for(var c in o){var s=n[c],u=s&&s.prototype;if(u&&u.forEach!==a)try{i(u,"forEach",a)}catch(l){u.forEach=a}}},"17c2":function(e,t,r){"use strict";var n=r("b727").forEach,o=r("a640"),a=o("forEach");e.exports=a?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},"1da1":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r("d3b7");function n(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,o)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(o,a){var i=e.apply(t,r);function c(e){n(i,o,a,c,s,"next",e)}function s(e){n(i,o,a,c,s,"throw",e)}c(void 0)}))}}},"1dde":function(e,t,r){var n=r("d039"),o=r("b622"),a=r("2d00"),i=o("species");e.exports=function(e){return a>=51||!n((function(){var t=[],r=t.constructor={};return r[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"47c9":function(e,t,r){},"4de4":function(e,t,r){"use strict";var n=r("23e7"),o=r("b727").filter,a=r("1dde"),i=a("filter");n({target:"Array",proto:!0,forced:!i},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},"65f0":function(e,t,r){var n=r("861d"),o=r("e8b5"),a=r("b622"),i=a("species");e.exports=function(e,t){var r;return o(e)&&(r=e.constructor,"function"!=typeof r||r!==Array&&!o(r.prototype)?n(r)&&(r=r[i],null===r&&(r=void 0)):r=void 0),new(void 0===r?Array:r)(0===t?0:t)}},"96cf":function(e,t,r){var n=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(S){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof v?t:v,a=Object.create(o.prototype),i=new Q(n||[]);return a._invoke=P(e,r,i),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(S){return{type:"throw",arg:S}}}e.wrap=u;var f="suspendedStart",h="suspendedYield",p="executing",d="completed",m={};function v(){}function g(){}function y(){}var b={};b[a]=function(){return this};var w=Object.getPrototypeOf,x=w&&w(w(F([])));x&&x!==r&&n.call(x,a)&&(b=x);var k=y.prototype=v.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function r(o,a,i,c){var s=l(e[o],e,a);if("throw"!==s.type){var u=s.arg,f=u.value;return f&&"object"===typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(s.arg)}var o;function a(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}this._invoke=a}function P(e,t,r){var n=f;return function(o,a){if(n===p)throw new Error("Generator is already running");if(n===d){if("throw"===o)throw a;return W()}r.method=o,r.arg=a;while(1){var i=r.delegate;if(i){var c=D(i,r);if(c){if(c===m)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var s=l(e,t,r);if("normal"===s.type){if(n=r.done?d:h,s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n=d,r.method="throw",r.arg=s.arg)}}}function D(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator["return"]&&(r.method="return",r.arg=t,D(e,r),"throw"===r.method))return m;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Q(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function F(e){if(e){var r=e[a];if(r)return r.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){while(++o<e.length)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}return{next:W}}function W(){return{value:t,done:!0}}return g.prototype=k.constructor=y,y.constructor=g,g.displayName=s(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},_(L.prototype),L.prototype[i]=function(){return this},e.AsyncIterator=L,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new L(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(k),s(k,c,"Generator"),k[a]=function(){return this},k.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){while(t.length){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=F,Q.prototype={constructor:Q,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:F(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=n}catch(o){Function("r","regeneratorRuntime = r")(n)}},a640:function(e,t,r){"use strict";var n=r("d039");e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){throw 1},1)}))}},b0c0:function(e,t,r){var n=r("83ab"),o=r("9bf2").f,a=Function.prototype,i=a.toString,c=/^\s*function ([^ (]*)/,s="name";n&&!(s in a)&&o(a,s,{configurable:!0,get:function(){try{return i.call(this).match(c)[1]}catch(e){return""}}})},b727:function(e,t,r){var n=r("0366"),o=r("44ad"),a=r("7b0b"),i=r("50c4"),c=r("65f0"),s=[].push,u=function(e){var t=1==e,r=2==e,u=3==e,l=4==e,f=6==e,h=7==e,p=5==e||f;return function(d,m,v,g){for(var y,b,w=a(d),x=o(w),k=n(m,v,3),_=i(x.length),L=0,P=g||c,D=t?P(d,_):r||h?P(d,0):void 0;_>L;L++)if((p||L in x)&&(y=x[L],b=k(y,L,w),e))if(t)D[L]=b;else if(b)switch(e){case 3:return!0;case 5:return y;case 6:return L;case 2:s.call(D,y)}else switch(e){case 4:return!1;case 7:s.call(D,y)}return f?-1:u||l?l:D}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},e2c5:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"accountManage"},[e._m(0),r("div",{staticClass:"accountManage__listBox"},[e.userList.length>1?r("div",{staticClass:"accountManage__listBox--add"},[r("span",{on:{click:function(t){return e.setAccountFunc("add")}}},[r("i",{staticClass:"el-icon-plus"}),r("a",[e._v("新增")])])]):e._e(),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.userList,"tooltip-effect":"dark","empty-text":"暫無數據"},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"index",label:"序號",width:"50"}}),r("el-table-column",{attrs:{label:"使用者名稱",prop:"name",width:"200"}}),r("el-table-column",{attrs:{label:"使用者角色",prop:"roleName",width:"150"}}),r("el-table-column",{attrs:{label:"上次登錄時間"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("moment")(t.row.lastLoginTime,"YYYY-MM-DD HH:mm:ss")))]}}])}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.userList.length>1?r("div",{staticClass:"accountManage__listBox--userFunc"},[r("el-tooltip",{attrs:{effect:"dark",content:"編輯",placement:"bottom"}},[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.setAccountFunc("edit",t.row)}}},[r("i",{staticClass:"el-icon-edit"})])],1),r("el-tooltip",{attrs:{effect:"dark",content:"刪除",placement:"bottom"}},[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.setAccountFunc("del",t.row)}}},[r("i",{staticClass:"el-icon-delete"})])],1)],1):r("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(r){return r.preventDefault(),e.changePWD(t.$index,t.row)}}},[e._v(" 變更密碼 ")])]}}])})],1)],1),r("el-dialog",{attrs:{title:e.setAccountTitle+"帳號",visible:e.setAccount,width:"60%",center:""},on:{"update:visible":function(t){e.setAccount=t}}},[r("el-form",{ref:"ruleForm_setAccount",attrs:{model:e.userQuery,rules:e.rules_setAccount,"label-width":"180px"}},[r("el-form-item",{attrs:{label:"使用者名稱",prop:"name"}},[r("el-input",{model:{value:e.userQuery.name,callback:function(t){e.$set(e.userQuery,"name",t)},expression:"userQuery.name"}})],1),r("el-form-item",{attrs:{label:"使用者角色",prop:"roleLevel"}},[r("el-select",{staticClass:"w-full",attrs:{placeholder:"請選擇角色"},model:{value:e.userQuery.roleLevel,callback:function(t){e.$set(e.userQuery,"roleLevel",t)},expression:"userQuery.roleLevel"}},[r("el-option",{attrs:{label:"管理者",value:"2"}}),r("el-option",{attrs:{label:"使用者",value:"1"}})],1)],1),r("el-form-item",{attrs:{label:"使用者單位",prop:"comDep"}},[r("el-input",{model:{value:e.userQuery.comDep,callback:function(t){e.$set(e.userQuery,"comDep",t)},expression:"userQuery.comDep"}})],1),r("el-form-item",{attrs:{label:"使用者聯絡資訊",prop:"contractInfo"}},[r("el-input",{model:{value:e.userQuery.contractInfo,callback:function(t){e.$set(e.userQuery,"contractInfo",t)},expression:"userQuery.contractInfo"}})],1),r("el-divider"),r("el-form-item",{attrs:{label:"使用者帳號",prop:"email"}},[r("el-input",{attrs:{disabled:"編輯"==e.setAccountTitle},model:{value:e.userQuery.email,callback:function(t){e.$set(e.userQuery,"email",t)},expression:"userQuery.email"}})],1),r("el-form-item",{attrs:{label:"使用者密碼",prop:"pass"}},[r("el-input",{attrs:{"show-password":"",disabled:"編輯"==e.setAccountTitle},model:{value:e.userQuery.pass,callback:function(t){e.$set(e.userQuery,"pass",t)},expression:"userQuery.pass"}})],1),r("el-form-item",{attrs:{label:"請再次輸入密碼",prop:"checkPass"}},[r("el-input",{attrs:{"show-password":"",disabled:"編輯"==e.setAccountTitle},model:{value:e.userQuery.checkPass,callback:function(t){e.$set(e.userQuery,"checkPass",t)},expression:"userQuery.checkPass"}})],1),r("el-form-item",{attrs:{label:"備註",prop:"memo"}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},disabled:"編輯"==e.setAccountTitle},model:{value:e.userQuery.memo,callback:function(t){e.$set(e.userQuery,"memo",t)},expression:"userQuery.memo"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addUser()}}},[e._v("儲存")]),r("el-button",{attrs:{type:"danger"},on:{click:function(t){e.setAccount=!1}}},[e._v("取消")])],1)],1),r("el-dialog",{attrs:{title:"變更密碼",visible:e.changePWD_func,width:"60%",center:""},on:{"update:visible":function(t){e.changePWD_func=t}}},[r("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"200px"}},[r("el-form-item",{attrs:{label:"請輸入舊密碼",prop:"oldPWD"}},[r("el-input",{attrs:{"show-password":""},model:{value:e.ruleForm.oldPWD,callback:function(t){e.$set(e.ruleForm,"oldPWD",t)},expression:"ruleForm.oldPWD"}})],1),r("el-form-item",{attrs:{label:"請輸入新密碼",prop:"newPWD"}},[r("el-input",{attrs:{"show-password":""},model:{value:e.ruleForm.newPWD,callback:function(t){e.$set(e.ruleForm,"newPWD",t)},expression:"ruleForm.newPWD"}})],1),r("el-form-item",{attrs:{label:"請再次輸入新密碼",prop:"checkPWD"}},[r("el-input",{attrs:{"show-password":""},model:{value:e.ruleForm.checkPWD,callback:function(t){e.$set(e.ruleForm,"checkPWD",t)},expression:"ruleForm.checkPWD"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.changePWD_func=!1}}},[e._v("儲存")]),r("el-button",{attrs:{type:"danger"},on:{click:function(t){e.changePWD_func=!1}}},[e._v("取消")])],1)],1)],1)},o=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"accountManage__title"},[r("strong",[e._v("帳號管理")])])}],a=r("1da1"),i=(r("96cf"),r("4de4"),r("b0c0"),r("159b"),{data:function(){var e=this,t=function(t,r,n){""===r?n(new Error("此為必填欄位")):r!==e.userQuery.pass?n(new Error("兩次密碼輸入不一致")):n()},r=function(t,r,n){""===r?n(new Error("此為必填欄位")):r!==e.ruleForm.newPWD?n(new Error("兩次密碼輸入不一致")):n()};return{getUserRole:"",tableData:[],userList:[],multipleSelection:[],setAccount:!1,setAccountTitle:"",userQuery:{comId:"",comName:"",comDep:"",email:"",memo:"",contractInfo:"",name:"",pass:"",checkPass:"",retry:1,isActive:1,roleLevel:""},rules_setAccount:{name:[{required:!0,message:"此為必填欄位",trigger:"blur"}],roleLevel:[{required:!0,message:"請選擇使用者角色",trigger:"change"}],comDep:[{required:!0,message:"此為必填欄位",trigger:"blur"}],contractInfo:[{required:!0,message:"此為必填欄位",trigger:"blur"}],email:[{required:!0,message:"此為必填欄位",trigger:"blur"}],pass:[{required:!0,message:"此為必填欄位",trigger:"blur"}],checkPass:[{required:!0,validator:t,trigger:"blur"}],memo:[{required:!0,message:"此為必填欄位",trigger:"blur"}]},changePWD_func:!1,ruleForm:{oldPWD:"",newPWD:"",checkPWD:""},rules:{oldPWD:[{required:!0,message:"此為必填欄位",trigger:"blur"}],newPWD:[{required:!0,message:"此為必填欄位",trigger:"blur"}],checkPWD:[{required:!0,validator:r,trigger:"blur"}]}}},methods:{getUserList:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(window.localStorage.getItem("userInfo")),n=[],t.next=4,e.$api.getUserList({ComId:r.comId}).then((function(e){n=e.data}));case 4:2===r.roleLevel?e.userList=n:e.userList=n.filter((function(e){return e.name==r.name&&e.email==r.email}));case 5:case"end":return t.stop()}}),t)})))()},toggleSelection:function(e){var t=this;e?e.forEach((function(e){t.$refs.multipleTable.toggleRowSelection(e)})):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},setAccountFunc:function(e,t){switch(e){case"add":this.userQuery={comId:"",comName:"",comDep:"",email:"",memo:"",contractInfo:"",name:"",pass:"",checkPass:"",retry:1,isActive:1,roleLevel:""},this.setAccountTitle="新增",this.setAccount=!0;break;case"edit":this.setAccountTitle="編輯",this.userQuery=t,this.setAccount=!0;break;case"del":this.$confirm("確定要刪除『"+t.name+"』嗎？","提示",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).then((function(){})).catch((function(){}));break}},changePWD:function(e,t){console.log(e,t),this.changePWD_func=!0},addUser:function(){var e=this;e.$refs.ruleForm_setAccount.validate((function(t){t&&console.log(e.userQuery)}))}},mounted:function(){this.getUserList(),this.tableData=[JSON.parse(window.localStorage.getItem("userInfo"))],this.getUserRole=JSON.parse(window.localStorage.getItem("userInfo")).roleLevel}}),c=i,s=(r("0a54"),r("2877")),u=Object(s["a"])(c,n,o,!1,null,null,null);t["default"]=u.exports},e8b5:function(e,t,r){var n=r("c6b6");e.exports=Array.isArray||function(e){return"Array"==n(e)}}}]);
//# sourceMappingURL=chunk-324aa3b2.3dfc5853.js.map